!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ZBVideo=t():e.ZBVideo=t()}(self,(function(){return function(){var e={d:function(t,o){for(var i in o)e.o(o,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:o[i]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var t;e.g.importScripts&&(t=e.g.location+"");var o=e.g.document;if(!t&&o&&(o.currentScript&&(t=o.currentScript.src),!t)){var i=o.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t+"../"}();var t={};return e.p=window.zionBuilderPaths.zionbuilder,function(){"use strict";e.d(t,{default:function(){return c}});var o=()=>{const e={};return{on:(t,o)=>{void 0===e[t]&&(e[t]=[]),e[t].push(o)},off:(t,o)=>{if(void 0!==e[t]){const i=e[t].indexOf(o);-1!==i&&e[t].splice(i)}},trigger:(t,...o)=>{void 0!==e[t]&&e[t].forEach((e=>{e(...o)}))}}};const{on:i,off:s,trigger:n}=o(),{addFilter:r,applyFilters:u}=(()=>{const e={};return{addFilter:(t,o)=>{void 0===e[t]&&(e[t]=[]),e[t].push(o)},applyFilters:(t,o,...i)=>(void 0!==e[t]&&e[t].forEach((e=>{o=e(o,...i)})),o)}})();let a=0,d=0,h=0,l=1;const p=o();class c{constructor(e,t={}){this.options={},this.videoContainer=null,this.videoSource="local",this.muted=!0,this.playing=!0,this.options=Object.assign({autoplay:!0,muted:!0,loop:!0,controls:!0,controlsPosition:"bottom-left",videoSource:"local",responsive:!0},t),this.eventBus=o(),this.on=this.eventBus.on,this.off=this.eventBus.off,this.trigger=this.eventBus.trigger,this.domNode=e,this.videoIndex=h++,this.videoContainer=null,this.options.responsive&&this.on("video_ready",(()=>{!function(e,t){var o="string"==typeof e?document.querySelectorAll(e):e,i=t||"js-reframe";"length"in o||(o=[o]);for(var s=0;s<o.length;s+=1){var n=o[s];if(!(-1!==n.className.split(" ").indexOf(i)||n.style.width.indexOf("%")>-1)){var r=(n.getAttribute("height")||n.offsetHeight)/(n.getAttribute("width")||n.offsetWidth)*100,u=document.createElement("div");u.className=i;var a=u.style;a.position="relative",a.width="100%",a.paddingTop=r+"%";var d=n.style;d.position="absolute",d.width="100%",d.height="100%",d.left="0",d.top="0",n.parentNode.insertBefore(u,n),n.parentNode.removeChild(n),u.appendChild(n)}}}(this.videoContainer)})),this.domNode.zionVideo=this,this.nextTick((()=>{"local"===this.options.videoSource&&this.options.mp4?(this.videoSource="local",this.setupLocal()):"youtube"===this.options.videoSource&&this.options.youtubeURL?(this.videoSource="youtube",this.YoutubeId=this.youtubeUrlParser(this.options.youtubeURL),this.setupYoutube()):"vimeo"===this.options.videoSource&&this.options.vimeoURL&&(this.videoSource="vimeo",this.setupVimeo())}))}youtubeUrlParser(e){const t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return!(!t||11!==t[7].length)&&t[7]}nextTick(e){setTimeout((()=>{e()}),0)}setupYoutube(){const e={mute:this.options.muted?1:0,autoplay:this.options.autoplay?1:0,iv_load_policy:3,showinfo:0,controls:this.options.controls?1:0,modestbranding:1,rel:0,wmode:"transparent"};let t="";for(const[o,i]of Object.entries(e))t+=`&${o}=${i}`;const o=document.createElement("iframe");if(o.src=`https://www.youtube-nocookie.com/embed/${this.YoutubeId}?enablejsapi=1${t}`,o.id=`znpb-video-bg-youtube-${this.videoIndex}`,o.allow="autoplay; fullscreen",o.width=425,o.height=239,this.domNode.appendChild(o),0===a){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);const o=this;window.onYouTubeIframeAPIReady=function(){o.enableYoutube(),p.trigger("youtube_api_ready"),a=2},a=1}else 1===a?p.on("youtube_api_ready",this.enableYoutube.bind(this)):2===a&&this.enableYoutube()}enableYoutube(){this.player=new window.YT.Player(`znpb-video-bg-youtube-${this.videoIndex}`,{height:"100%",width:"100%",videoId:this.YoutubeId}),this.videoContainer=this.player.getIframe(),this.trigger("video_ready")}setupVimeo(){const e=document.createElement("div");if(e.id=`znpb-video-bg-vimeo-${this.videoIndex}`,this.domNode.appendChild(e),0===d){const e=document.createElement("script");e.src="https://player.vimeo.com/api/player.js";const t=document.getElementsByTagName("script")[1],o=this;t.parentNode.insertBefore(e,t),e.onload=function(){o.enableVimeo(),p.trigger("vimeo_api_ready"),d=2},d=1}else 1===d?p.on("vimeo_api_ready",this.enableVimeo.bind(this)):2===d&&this.enableVimeo()}enableVimeo(){this.player=new window.Vimeo.Player(`znpb-video-bg-vimeo-${this.videoIndex}`,{id:this.options.vimeoURL,background:this.options.autoplay,muted:this.options.muted,transparent:!0,autoplay:this.options.autoplay,controls:this.options.controls}),this.player.ready().then((()=>{this.videoContainer=this.player.element,this.trigger("video_ready")}))}setupLocal(){const e=this.options.autoplay?"autoplay":"",t=this.options.muted?"muted":"",o=this.options.loop?"loop":"",i=document.createElement("video");if(i.muted=t,i.autoplay=e,i.loop=o,this.options.controls&&(i.controls=!0),this.options.mp4){const e=document.createElement("source");e.src=this.options.mp4,i.appendChild(e)}this.domNode.appendChild(i),this.player=i,this.videoContainer=i,this.trigger("video_ready")}getVideoContainer(){return this.videoContainer}play(){"youtube"===this.videoSource&&this.player.playVideo(),"vimeo"===this.videoSource&&this.player.play(),"local"===this.videoSource&&this.player.play(),this.playing=!0}pause(){"youtube"===this.videoSource&&this.player.pauseVideo(),"vimeo"===this.videoSource&&this.player.pause(),"local"===this.videoSource&&this.player.pause(),this.playing=!1}togglePlay(){this.playing?this.pause():this.play()}mute(){"youtube"===this.videoSource&&this.player.mute(),"vimeo"===this.videoSource&&(this.player.getVolume().then((e=>{l=e})),this.player.setVolume(0)),"local"===this.videoSource&&(this.player.muted=!0),this.muted=!0}unMute(){"youtube"===this.videoSource&&this.player.unMute(),"vimeo"===this.videoSource&&this.player.setVolume(l),"local"===this.videoSource&&(this.player.muted=!1),this.muted=!1}toggleMute(){this.muted?this.unMute():this.mute()}destroy(){for(this.trigger("beforeDestroy"),this.player=null;this.domNode.firstChild;)this.domNode.removeChild(this.domNode.firstChild)}}}(),t.default}()}));